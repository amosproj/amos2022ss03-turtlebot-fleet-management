<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.88.1">
    <title>Fleet Management</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.1/examples/starter-template/">

    <script src="https://unpkg.com/vue@3"></script>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.1/css/bootstrap.min.css"
          integrity="sha512-T584yQ/tdRR5QwOpfvDfVQUidzfgc2339Lc8uBDtcp/wYu80d7jwBgAxbyMh0a9YM9F8N3tdErpFI8iaGx6x5g=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>

    <!-- Custom styles for this template -->
    <link href="starter-template.css" rel="stylesheet">
</head>
<body>

<div class="col-lg-8 mx-auto p-3 py-md-5">
    <header class="d-flex align-items-center pb-3 mb-5 border-bottom">
        <div href="/" class="d-flex align-items-center text-dark text-decoration-none">
            <img src="tfm-logo.jpg" height="100">
            <span class="fs-4"><h3>Turtlebot Fleet Management - Global UI</h3></span>
        </div>
    </header>

    <main>
        <div id="app">
            <!-- Button trigger modal -->
            <div class="row">
                <button type="button" class="btn btn-primary mx-auto d-block" data-toggle="modal"
                        data-target="#createOrderModal">
                    Create order
                </button>
            </div>


            <div class="row">
                <img src="graph" height="400" class="mx-auto d-block" id="graphmap">
            </div>


            <div class="row">
                <div class="container">
                    <h3 class="p-3 text-center">Orders</h3>
                    <table class="table table-striped table-bordered">
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">AGV</th>
                            <th scope="col">Nodes</th>
                            <th scope="col">Edges</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="order in orders">
                            <th scope="row">{{ order.orderId }} ({{ order.orderUpdateId }})</th>
                            <td>{{ order.serialNumber }}</td>
                            <td>
                                <ul>
                                    <li v-for="node in order.nodes">Node #{{ node.nodeId }} -
                                        released={{ node.released }}
                                    </li>
                                </ul>
                            </td>
                            <td>
                                <ul>
                                    <li v-for="edge in order.edges">Edge #{{ edge.edgeId }} -
                                        released={{ edge.released }}
                                    </li>
                                </ul>
                            </td>
                            <td><button @click="functionName(order.orderId)"></button></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row">
                <div class="container">
                    <h3 class="p-3 text-center">AGVs</h3>
                    <table class="table table-striped table-bordered">
                        <thead>
                        <tr>
                            <th>AGV ID</th>
                            <th>Driving Status</th>
                            <th>Connection Status</th>
                            <th>Battery Status (%)</th>
                            <th>Charging Status</th>
                            <th>Velocity (m/s)</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="agv in agvs" :key="agv.id">
                            <td>{{ agv.agv_id }}</td>
                            <td>{{ agv.driving_status }}</td>
                            <td id="status" >{{ agv.connection_state }}</td>
                            <td>{{ agv.battery_level }}</td>
                            <td>{{ agv.charging_status }}</td>
                            <td>{{ agv.velocity }}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>


            <!-- Modal -->
            <div class="modal fade" id="createOrderModal" tabindex="-1" role="dialog"
                 aria-labelledby="createOrderModalLabel"
                 aria-hidden="true"
            >
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="createOrderModalLabel">Create order</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div v-if="fromStation !== null && toStation !== null">
                                <img :src="'/api/agv/' + robotSerial + '/pathDisplay/' + fromStation + '/' + toStation"
                                     class="img-fluid">
                            </div>

                            <div class="form-group">
                                <label for="exampleInputEmail1">AGV serial</label>
                                <input type="text" class="form-control" id="exampleInputEmail1"
                                       aria-describedby="emailHelp" v-model="robotSerial">
                            </div>

                            <div class="form-group">
                                <label for="exampleFormControlSelect1">From Station</label>
                                <select class="form-control" id="exampleFormControlSelect1" v-model="fromStation">
                                    <option v-for="station in stations" :value="station.nid">{{ station.name }}
                                        ({{ station.nid }})
                                    </option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="exampleFormControlSelect1">To Station</label>
                                <select class="form-control" id="exampleFormControlSelect2" v-model="toStation">
                                    <option v-for="station in stations" :value="station.nid">{{ station.name }}
                                        ({{ station.nid }})
                                    </option>
                                </select>
                            </div>

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-primary" @click="sendOrder" data-dismiss="modal">Create
                                order
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer class="pt-5 my-5 text-muted border-top">
        Created for the AMOS project - Team 3 - Turtlebot Fleet Management
    </footer>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"
        integrity="sha512-odNmoc1XJy5x1TMVMdC7EMs3IVdItLPlCeL5vSUPN2llYKMJ2eByTTAIiiuqLg+GdNr9hF6z81p27DArRFKT7A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="java.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.1/js/bootstrap.bundle.min.js"
        integrity="sha512-mULnawDVcCnsk9a4aG1QLZZ6rcce/jSzEGqUkeOLy0b6q0+T6syHrxlsAGH7ZVoqC93Pd0lBqd6WguPWih7VHA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</body>
</html>
